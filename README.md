# Домашнее задание к занятию "Компоненты Kubernetes" - `Молоствов Андрей`

---

### Требования приложения

База данных (StatefulSet)

Копий: 3

RAM на копию: 4 ГБ

CPU на копию: 1 ядро

Хранилище на копию: 50 ГБ (предположительно)

```
Итого:
RAM: 3 × 4 ГБ = 12 ГБ
CPU: 3 × 1 ядро = 3 ядра
Storage: 3 × 50 ГБ = 150 ГБ
```
Кеш (StatefulSet/Deployment)

Копий: 3

RAM на копию: 4 ГБ

CPU на копию: 1 ядро

```
Итого:
RAM: 3 × 4 ГБ = 12 ГБ
CPU: 3 × 1 ядро = 3 ядра
```

Фронтенд (Deployment)
Копий: 5

RAM на копию: 50 МБ = 0.05 ГБ

CPU на копию: 0.2 ядра

```
Итого:
RAM: 5 × 0.05 ГБ = 0.25 ГБ
CPU: 5 × 0.2 ядра = 1 ядро
```

Бекенд (Deployment)
Копий: 10

RAM на копию: 600 МБ = 0.6 ГБ

CPU на копию: 1 ядро

```
Итого:
RAM: 10 × 0.6 ГБ = 6 ГБ
CPU: 10 × 1 ядро = 10 ядер
```
### Запас на отказоустойчивость

Правило: выдерживать потерю одной ноды
Для обеспечения отказоустойчивости добавляем запас:

Дополнительные ресурсы: +1 копия каждого компонента

Дополнительные ресурсы: ОЗУ: ~10 ГБ, CPU: ~6 ядер

```
Итого с запасом:
ОЗУ: 30.25 + 10 = 40.25 ГБ
CPU: 17 + 6 = 23 ядра
Хранилище: 150 ГБ
```

### Ресурсы на системные компоненты Kubernetes

*На каждую ноду требуется для системных нужд:

*kubelet, kube-proxy: 0.5 ГБ ОЗУ, 0.5 ядра

*container runtime: 0.5 ГБ ОЗУ, 0.5 ядра

system/OS: 1 ГБ ОЗУ, 0.5 ядра

```
Итого на ноду: 2 ГБ ОЗУ, 1.5 ядра
```

### Расчет количества рабочих нод

Предполагаемая конфигурация ноды:

ОЗУ: 16 ГБ

CPU: 8 ядер

Хранилище: 100 ГБ SSD

```
Расчет:
Доступные ресурсы на ноду (за вычетом системных):
ОЗУ: 16 ГБ - 2 ГБ = 14 ГБ
CPU: 8 ядер - 1.5 ядра = 6.5 ядер
Требуемое количество нод:
По ОЗУ: 40.25 ГБ / 14 ГБ = 2.87 это 3 ноды
По CPU: 23 ядра / 6.5 ядра = 3.54 это 4 ноды
Vаксимальное значение: 4 ноды
```

### Итоговая рекомендуемая конфигурация

```
Количество нод: 4
Параметры каждой ноды:
- ОЗУ: 16 ГБ (14 ГБ доступно для подов)
- CPU: 8 ядер (6.5 ядер доступно)
- Хранилище: 100 ГБ SSD
- Сеть: 1 Гбит/с

Суммарные ресурсы кластера:
- ОЗУ: 4 × 16 ГБ = 64 ГБ (56 ГБ доступно)
- CPU: 4 × 8 = 32 ядра (26 доступно)
- Хранилище: 4 × 100 = 400 ГБ
```

